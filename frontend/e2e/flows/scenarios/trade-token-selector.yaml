appId: com.nicolasmartin.dankfolio
env:
    jupSymbol: "JUP"
    solSymbol: "SOL"
    dankSymbol: "DANK"
    usdcSymbol: "USDC"
---
- runFlow: ../common/app-setup.yaml

# Navigate to trade screen via trending coin
- tapOn:
      id: "trending-coin-card-JUP.*"
- tapOn:
      id: "trade-button"

# Test 1: Initial SOL -> JUP setup with amount validation
- runFlow:
    file: ../components/trade-token-selector.yaml
    env:
      FROM_SYMBOL: ${solSymbol}
      TO_SYMBOL: ${jupSymbol}
      EXPECTED_FROM_AMOUNT: ""
      EXPECTED_TO_AMOUNT: ""

# # Test 2: Change TO token to DANK and validate with amounts
# - tapOn:
#       id: "to-token-selector-JUP.*"
# - tapOn:
#       id: "search-result-DANK.*"
# - runFlow:
#     file: ../components/trade-token-selector.yaml
#     env:
#       FROM_SYMBOL: ${solSymbol}
#       TO_SYMBOL: ${dankSymbol}
#       EXPECTED_FROM_AMOUNT: "1.0"
#       EXPECTED_TO_AMOUNT: "1000.0"

# # Test 3: Test swap functionality and validate result with amounts
# - tapOn:
#       id: swap-coins-button
# - runFlow:
#     file: ../components/trade-token-selector.yaml
#     env:
#       FROM_SYMBOL: ${dankSymbol}
#       TO_SYMBOL: ${solSymbol}
#       EXPECTED_FROM_AMOUNT: "1000.0"
#       EXPECTED_TO_AMOUNT: "1.0"

# # Test 4: Change FROM token to USDC and validate with amounts
# - tapOn:
#       id: "from-token-selector-DANK.*"
# - tapOn:
#       id: "search-result-USDC.*"
# - runFlow:
#     file: ../components/trade-token-selector.yaml
#     env:
#       FROM_SYMBOL: ${usdcSymbol}
#       TO_SYMBOL: ${solSymbol}
#       EXPECTED_FROM_AMOUNT: "100.0"
#       EXPECTED_TO_AMOUNT: "1.0"

# # Test 5: Final swap back and test with amount validation
# - tapOn:
#       id: swap-coins-button
# - runFlow:
#     file: ../components/trade-token-selector.yaml
#     env:
#       FROM_SYMBOL: ${solSymbol}
#       TO_SYMBOL: ${usdcSymbol}
#       EXPECTED_FROM_AMOUNT: "1.0"
#       EXPECTED_TO_AMOUNT: "100.0"

# # Test 6: Comprehensive test with different token pair and amounts
# - runFlow:
#     file: ../components/trade-token-selector.yaml
#     env:
#       FROM_SYMBOL: ${jupSymbol}
#       TO_SYMBOL: ${dankSymbol}
#       EXPECTED_FROM_AMOUNT: "25.0"
#       EXPECTED_TO_AMOUNT: "500.0"
